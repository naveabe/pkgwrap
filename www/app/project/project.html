<!--
<div class="row" style="margin:0;padding:10px 0;border-bottom:1px solid #ddd">
    <div class="col-md-8" style="padding:0">
        <h4 class="breadcrumb-path">{{repository}} / <a href="#/{{repository}}/{{username}}">{{username}}</a> / {{project}} / 
            <span class="dropdown">
                <a id="version-dropdown" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                    <span>{{selectedVersion.version}} <span class="caret"></span></span>
                </a>
                <ul class="dropdown-menu" aria-labelledby="version-dropdown" role="menu">
                    <li ng-repeat="projVersion in projectVersions" role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/{{repository}}/{{username}}/{{project}}/{{projVersion.version}}">{{projVersion.version}}</a>
                    </li>    
                </ul>
            </span>
        </h4>
    </div>
    <div class="col-md-4 text-right" style="padding:0">
        <h4 class="build-btn-dark">
            <a href="#/{{repository}}/{{username}}/{{project}}/configbuilder" title="New Config File">
                <span style="margin-right:20px">
                    <span class="glyphicon glyphicon-edit"></span>
                </span>
            </a>
            <request-dialog-button ng-model="project"></request-dialog-button>
        </h4>
    </div>
</div>
-->
<div class="row" style="margin:0">
    <div class="col-md-5" style="padding-left:0;">
        <h4 class="breadcrumb-path" style="margin:20px 0">{{repository}} / <a href="#/{{repository}}/{{username}}">{{username}}</a> / {{project}}
            <span class="dropdown pull-right">
                <a id="version-dropdown" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                    <span>{{selectedVersion.version}} <span class="caret"></span></span>
                </a>
                <ul class="dropdown-menu" aria-labelledby="version-dropdown" role="menu">
                    <li ng-repeat="projVersion in projectVersions" role="presentation">
                        <a role="menuitem" tabindex="-1" href="#/{{repository}}/{{username}}/{{project}}/{{projVersion.version}}">{{projVersion.version}}</a>
                    </li>    
                </ul>
            </span>
        </h4>
        <!--<h4 style="padding:10px 0"><span class="packages-title-label">Packages</span></h4>-->
        <ul class="list-group">
            <li class="list-group-item pkg-distro-list-item" ng-repeat="distro in selectedVersion.distros">
                <table style="width:100%;color:#888">
                    <tr>
                        <td data-toggle="collapse" data-target="[data-distro-name={{distro.name|dotsToUnderscores}}]" style="width:45px;border-right:1px solid #ddd">
                            <img ng-src="imgs/{{distro.name}}.png" width="32" height="32" style="opacity:0.7">
                        </td>
                        <td data-toggle="collapse" data-target="[data-distro-name={{distro.name|dotsToUnderscores}}]" style="padding-left:15px;">
                            <div><b>{{distro.name|distroLabel}}</b></div>
                        </td>
                        <td style="text-align:right">
                            <a href="/api/repo/{{repository}}/{{username}}/{{project}}/{{version}}/{{distro.name}}/{{distro.packages[distro.packages.length-1].name}}" class="pkg-download-btn">
                                <div style="font-size:12px;display:inline-block">{{distro.packages[distro.packages.length-1].name}}</div><br/>
                            </a>
                        </td>
                        <td style="text-align:center">
                            <a href="/api/repo/{{repository}}/{{username}}/{{project}}/{{version}}/{{distro.name}}/{{distro.packages[distro.packages.length-1].name}}" class="pkg-download-btn">
                                <div><span class="glyphicon glyphicon-download"></span></div>
                                <div style="padding-top:3px;font-size:10px;display:inline-block">
                                    {{distro.packages[distro.packages.length-1].size|valueUnit}}
                                </div>
                            </a>
                        </td>
                    </tr>
                </table>
                <div class="collapse" data-distro-name="{{distro.name|dotsToUnderscores}}">
                    <ul style="margin-top:10px;padding-left:10px">
                        <a ng-repeat="package in distro.packages|orderBy:'mtime':true" href="/api/repo/{{repository}}/{{username}}/{{project}}/{{version}}/{{distro.name}}/{{package.name}}" class="pkg-download-btn">
                            <div style="border-top:1px solid #eee;">
                                <div style="display:inline-block;padding-right:10px" class="text-center">
                                    <img ng-src="imgs/package.png" width="18" height="18" style="position: relative;top: 50%;transform: translateY(-50%);">
                                </div>
                                <div style="display:inline-block;font-size:13px;padding-top:5px;padding-bottom:5px;padding-left:15px">
                                    <div>{{package.name}}</div>
                                    <div class="small" style="padding-top:1px;">
                                        <span class="small">{{package.mtime*1000|date:'medium'}}  ({{package.size|valueUnit}})</span>
                                    </div>
                                </div>
                                <!--<div style="font-size:11px;">{{package.size|valueUnit}}</div>-->
                            </div>
                        </a>
                    </ul>
                </div>
            </li>
        </ul>
        <!--<config-builder></config-builder>-->
        <h4 style="position:fixed;left:0;bottom:0;padding:10px 20px">
            <a href="#/{{repository}}/{{username}}/{{project}}/configbuilder" title="New Config File">
                <span style="margin-right:20px;" class="circle-btn">
                    <span class="glyphicon glyphicon-edit"></span>
                </span>
            </a>
            <request-dialog-button ng-model="project"></request-dialog-button>
        </h4>
    </div>
    <div class="col-md-7" style="border-left:1px solid #eee;padding:0;height:100%">
        <ng-include ng-controller="historyController" src="historyHtml"></ng-include>
    </div>
</div>
<package-build username="username" repository="repositoryDetails.url" version="{{version}}"></package-build>